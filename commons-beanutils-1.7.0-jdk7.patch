From 0b833882b890a15de48abad653a24e0dda636598 Mon Sep 17 00:00:00 2001
From: Michael Simacek <msimacek@redhat.com>
Date: Tue, 5 Jan 2016 09:45:13 +0100
Subject: [PATCH] Port to JDK 7

---
 build.xml                                                     |  3 +++
 .../src/test/org/apache/commons/beanutils/TestBean.java       | 11 +++++++++--
 src/test/org/apache/commons/beanutils/TestBean.java           |  6 ++++++
 src/test/org/apache/commons/beanutils/TestResultSet.java      |  8 ++++++++
 4 files changed, 26 insertions(+), 2 deletions(-)

diff --git a/build.xml b/build.xml
index b174b0f..aedb4f6 100755
--- a/build.xml
+++ b/build.xml
@@ -163,6 +163,7 @@
     <javac  srcdir="${source.home}"
            destdir="${build.home}/classes"
              debug="${compile.debug}"
+          encoding="ISO-8859-1"
        deprecation="${compile.deprecation}"
           optimize="${compile.optimize}">
       <classpath refid="compile.classpath"/>
@@ -178,6 +179,7 @@
     <javac  srcdir="${test.home}"
            destdir="${build.home}/tests"
              debug="${compile.debug}"
+          encoding="ISO-8859-1"
        deprecation="${compile.deprecation}"
           optimize="${compile.optimize}">
       <classpath refid="test.classpath"/>
@@ -207,6 +209,7 @@
     <javadoc sourcepath="${source.home}"
                 destdir="${dist.home}/docs/api"
            packagenames="org.apache.commons.*"
+               encoding="ISO-8859-1"
                  author="true"
                 private="true"
                 version="true"
diff --git a/optional/bean-collections/src/test/org/apache/commons/beanutils/TestBean.java b/optional/bean-collections/src/test/org/apache/commons/beanutils/TestBean.java
index f0703aa..a91a581 100755
--- a/optional/bean-collections/src/test/org/apache/commons/beanutils/TestBean.java
+++ b/optional/bean-collections/src/test/org/apache/commons/beanutils/TestBean.java
@@ -37,6 +37,8 @@ public class TestBean {
     // ----------------------------------------------------------- Constructors
 
     public TestBean() {
+        // deal with test ordering non-determinism
+        reset();
     }
 
     public TestBean(String stringProperty) {
@@ -230,9 +232,14 @@ public class TestBean {
     /**
      * A List property accessed as an indexed property.
      */
-    private static List listIndexed = new ArrayList();
-
+    private static List listIndexed;
+    
     static {
+        reset();
+    }
+
+    public static void reset() {
+        listIndexed = new ArrayList();
         listIndexed.add("String 0");
         listIndexed.add("String 1");
         listIndexed.add("String 2");
diff --git a/src/test/org/apache/commons/beanutils/TestBean.java b/src/test/org/apache/commons/beanutils/TestBean.java
index 5ff6e04..b9f2596 100755
--- a/src/test/org/apache/commons/beanutils/TestBean.java
+++ b/src/test/org/apache/commons/beanutils/TestBean.java
@@ -37,6 +37,7 @@ public class TestBean {
     // ----------------------------------------------------------- Constructors
 
     public TestBean() {
+        reset();
     }
 
     public TestBean(String stringProperty) {
@@ -233,6 +234,11 @@ public class TestBean {
     private static List listIndexed = new ArrayList();
 
     static {
+        reset();
+    }
+
+    public static void reset() {
+        listIndexed = new ArrayList();
         listIndexed.add("String 0");
         listIndexed.add("String 1");
         listIndexed.add("String 2");
diff --git a/src/test/org/apache/commons/beanutils/TestResultSet.java b/src/test/org/apache/commons/beanutils/TestResultSet.java
index b8d861f..30adf15 100644
--- a/src/test/org/apache/commons/beanutils/TestResultSet.java
+++ b/src/test/org/apache/commons/beanutils/TestResultSet.java
@@ -1063,4 +1063,12 @@ public class TestResultSet implements ResultSet {
     public boolean isWrapperFor(Class<?> iface) throws SQLException {
         throw new UnsupportedOperationException();
     }
+
+    public <T> T getObject(int columnIndex, Class<T> type) throws SQLException {
+        throw new UnsupportedOperationException();
+    }
+
+    public <T> T getObject(String columnLabel, Class<T> type) throws SQLException {
+        throw new UnsupportedOperationException();
+    }
 }
-- 
2.5.0

